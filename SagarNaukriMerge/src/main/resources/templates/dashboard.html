<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JobSeeker Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
        --primary-color: #3498db;
        --secondary-color: #2c3e50;
        --accent-color: #e74c3c;
        --light-bg: #f8f9fa;
        --success-color: #2ecc71;
        --warning-color: #f39c12;
        --dark-color: #343a40;
    }

    body {
        font-family: 'Lato', sans-serif;
        background-color: var(--light-bg);
        color: #333;
        line-height: 1.6;
    }

    .navbar {
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand {
        font-weight: 700;
        color: var(--primary-color) !important;
        font-size: 1.5rem;
        letter-spacing: -0.5px;
        display: flex;
        /* Added for alignment */
        align-items: center;
        /* Added for alignment */
    }

    .navbar-brand img {
        height: 30px;
        /* Adjust as needed */
        margin-right: 8px;
        /* Space between logo and text */
    }

    .profile-img {
        width: 150px;
        height: 150px;
        object-fit: cover;
        border: 4px solid var(--primary-color);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .profile-img:hover {
        transform: scale(1.05);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }

    .card {
        border-radius: 12px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        margin-bottom: 25px;
        border: none;
        overflow: hidden;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .card-header {
        background-color: white;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        padding: 1.25rem 1.5rem;
    }

    .card-body {
        padding: 1.5rem;
    }

    .badge-job-type {
        background-color: var(--primary-color);
        color: white;
        font-weight: 500;
        padding: 0.35em 0.65em;
    }

    .skill-badge {
        background-color: var(--secondary-color);
        color: white;
        margin-right: 5px;
        margin-bottom: 5px;
        display: inline-block;
        padding: 0.5em 0.8em;
        border-radius: 20px;
        font-size: 0.85rem;
    }

    .proficiency-bar {
        height: 10px;
        background-color: #e9ecef;
        border-radius: 5px;
        margin-top: 8px;
        overflow: hidden;
    }

    .proficiency-level {
        height: 100%;
        border-radius: 5px;
        background: linear-gradient(90deg, var(--primary-color), #5dade2);
    }

    .progress {
        height: 12px;
        border-radius: 6px;
        background-color: #f1f3f5;
    }

    .progress-bar {
        border-radius: 6px;
    }

    .sidebar {
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.05);
        padding: 1.5rem;
    }

    .sidebar-link {
        color: var(--secondary-color);
        font-weight: 500;
        padding: 0.5rem 1rem;
        margin: 0.25rem 0;
        border-radius: 6px;
        transition: all 0.2s ease;
    }

    .sidebar-link:hover {
        background-color: rgba(52, 152, 219, 0.1);
        color: var(--primary-color);
    }

    .sidebar-link.active {
        color: var(--primary-color);
        background-color: rgba(52, 152, 219, 0.1);
        border-left: 3px solid var(--primary-color);
    }

    .sidebar-link i {
        width: 20px;
        text-align: center;
        margin-right: 10px;
    }

    .timeline {
        position: relative;
        padding-left: 40px;
    }

    .timeline-item {
        position: relative;
        padding-bottom: 25px;
    }

    .timeline-item:before {
        content: '';
        position: absolute;
        left: -28px;
        top: 5px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        background-color: var(--primary-color);
        border: 3px solid white;
        box-shadow: 0 0 0 2px var(--primary-color);
        z-index: 2;
    }

    .timeline-item:after {
        content: '';
        position: absolute;
        left: -20px;
        top: 21px;
        bottom: 0;
        width: 2px;
        background-color: #e9ecef;
    }

    .timeline-item:last-child:after {
        display: none;
    }

    .edit-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .card:hover .edit-btn {
        opacity: 1;
    }

    .form-control-static {
        padding: 0.5rem 0;
        border-bottom: 1px dashed #eee;
        min-height: 2.5rem;
    }

    .btn-outline-primary {
        border-color: var(--primary-color);
        color: var(--primary-color);
    }

    .btn-outline-primary:hover {
        background-color: var(--primary-color);
        color: white;
    }

    .btn-primary {
        background-color: var(--primary-color);
        border-color: var(--primary-color);
    }

    .btn-primary:hover {
        background-color: #2980b9;
        border-color: #2980b9;
    }

    .current-job {
        border-left: 4px solid var(--success-color);
    }

    .alert {
        border-radius: 8px;
    }

    .dropdown-menu {
        border-radius: 8px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border: none;
    }

    .dropdown-item {
        padding: 0.5rem 1.5rem;
    }

    .dropdown-item:hover {
        background-color: rgba(52, 152, 219, 0.1);
        color: var(--primary-color);
    }

    .dropdown-divider {
        border-color: rgba(0, 0, 0, 0.05);
    }

    h5,
    h6 {
        font-weight: 600;
    }

    .text-muted {
        color: #6c757d !important;
    }

    .nav-link {
        transition: all 0.2s ease;
    }

    .badge {
        font-weight: 500;
        letter-spacing: 0.5px;
    }

    .sticky-top {
        top: 20px;
    }
  </style>
</head>

<body>

<script th:if="${jobMessage==true}">
  alert("Application submitted successfully!");
</script>

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <a class="navbar-brand" href="#">
      <img th:src="@{/websitelogo.png}" alt="Company Logo" style="height: 30px; margin-right: 8px;"> JobSeeker
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" href="#">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/alljobs">Jobs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/jobseeker/applications">Applications</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#">Profile</a>
        </li>
      </ul>
      <div class="d-flex align-items-center">
        <div class="dropdown">
          <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle"
             id="dropdownUser" data-bs-toggle="dropdown">
            <img th:if="${jobSeeker.profilePicture != null}" th:src="@{/jobseeker/profile-picture}"
                 class="rounded-circle me-2" width="40" height="40">
            <img th:unless="${jobSeeker.profilePicture != null}"
                 src="https://ui-avatars.com/api/?name=John+Doe&size=150&background=random"
                 class="rounded-circle me-2" width="40" height="40">
            <span class="d-none d-sm-inline" th:text="${jobSeeker.name}">John Doe</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" th:href="@{/jobseeker/edit}"><i
                    class="fas fa-user-edit me-2"></i>Profile</a></li>
            <li>
              <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item" th:href="@{/jobseeker/logout}"><i
                    class="fas fa-sign-out-alt me-2"></i>Sign out</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</nav>



<div class="container my-4">
  <div class="row">
    <div class="col-lg-3 mb-4">
      <div class="sidebar p-3 sticky-top">
        <div class="text-center mb-3">
          <div class="text-center mb-3">
            <img th:if="${jobSeeker.profilePicture != null}" th:src="@{'/jobseeker/profile-picture'}"
                 class="profile-img rounded-circle mb-3" alt="Profile Picture">

            <img th:unless="${jobSeeker.profilePicture != null}"
                 th:src="@{'https://ui-avatars.com/api/?name=' + ${jobSeeker.name.replace(' ','+')} + '&size=150&background=random'}"
                 class="profile-img rounded-circle mb-3" alt="Default Profile Picture">
          </div>
          <h5 th:text="${jobSeeker.name}">John Doe</h5>
          <p class="text-muted mb-3">Job Seeker</p>
          <a th:href="@{/jobseeker/edit}" class="btn btn-primary btn-sm px-4">
            <i class="fas fa-edit me-1"></i>Edit Profile
          </a>
        </div>
        <hr>
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link sidebar-link" href="dashboard.html">
              <i class="fas fa-tachometer-alt me-2"></i>Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" th:href="@{/jobseeker/conversations}"><i class="fas fa-comments me-2"></i>Messages</a>
          </li>
          <li class="nav-item">
            <a class="nav-link sidebar-link active" href="profile.html">
              <i class="fas fa-user me-2"></i>My Profile
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link sidebar-link" href="#qualifications">
              <i class="fas fa-graduation-cap me-2"></i>Qualifications
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link sidebar-link" href="#experience">
              <i class="fas fa-briefcase me-2"></i>Experience
            </a>
          <li class="nav-item">
            <a class="nav-link sidebar-link" href="#skills">
              <i class="fas fa-code me-2"></i>Skills
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="col-lg-9">
      <div class="row mb-4">
        <div class="col-md-6 col-lg-3 mb-3">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title text-muted mb-3">Profile Completion</h6>
              <div class="progress mx-auto mb-3" style="height: 12px; width: 80%">
                <div class="progress-bar bg-success" role="progressbar" style="width: 100%"
                     aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <span class="badge bg-success rounded-pill">Complete</span>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mb-3">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title text-muted mb-3">Skills</h6>
              <div class="progress mx-auto mb-3" style="height: 12px; width: 80%">
                <div class="progress-bar"
                     th:classappend="${jobSeekerSkills != null && !jobSeekerSkills.empty} ? 'bg-success' : 'bg-warning'"
                     role="progressbar"
                     th:style="${jobSeekerSkills != null && !jobSeekerSkills.empty} ? 'width: 100%' : 'width: 30%'"
                     th:attr="aria-valuenow=${jobSeekerSkills != null && !jobSeekerSkills.empty} ? 100 : 30"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <span th:if="${jobSeekerSkills != null && !jobSeekerSkills.empty}"
                    class="badge bg-success rounded-pill">Complete</span>
              <span th:unless="${jobSeekerSkills != null && !jobSeekerSkills.empty}"
                    class="badge bg-warning rounded-pill">Incomplete</span>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mb-3">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title text-muted mb-3">Experience</h6>
              <div class="progress mx-auto mb-3" style="height: 12px; width: 80%">
                <div class="progress-bar"
                     th:classappend="${experiences != null && !experiences.empty} ? 'bg-success' : 'bg-warning'"
                     role="progressbar"
                     th:style="${experiences != null && !experiences.empty} ? 'width: 100%' : 'width: 30%'"
                     th:attr="aria-valuenow=${experiences != null && !experiences.empty} ? 100 : 30"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <span th:if="${experiences != null && !experiences.empty}"
                    class="badge bg-success rounded-pill">Complete</span>
              <span th:unless="${experiences != null && !experiences.empty}"
                    class="badge bg-warning rounded-pill">Incomplete</span>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-3 mb-3">
          <div class="card h-100">
            <div class="card-body text-center">
              <h6 class="card-title text-muted mb-3">Education</h6>
              <div class="progress mx-auto mb-3" style="height: 12px; width: 80%">
                <div class="progress-bar"
                     th:classappend="${qualifications != null && !qualifications.empty} ? 'bg-success' : 'bg-warning'"
                     role="progressbar"
                     th:style="${qualifications != null && !qualifications.empty} ? 'width: 100%' : 'width: 30%'"
                     th:attr="aria-valuenow=${qualifications != null && !qualifications.empty} ? 100 : 30"
                     aria-valuemin="0" aria-valuemax="100"></div>
              </div>
              <span th:if="${qualifications != null && !qualifications.empty}"
                    class="badge bg-success rounded-pill">Complete</span>
              <span th:unless="${qualifications != null && !qualifications.empty}"
                    class="badge bg-warning rounded-pill">Incomplete</span>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="fas fa-user-circle me-2"></i>Personal Information</h5>
          <a th:href="@{/jobseeker/edit}" class="btn btn-sm btn-outline-primary">
            <i class="fas fa-edit me-1"></i>Edit
          </a>
        </div>

        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label class="form-label text-muted"><i class="fas fa-user me-1"></i>Full
                  Name</label>
                <p class="form-control-static" th:text="${jobSeeker.name}">John Doe</p>
              </div>
              <div class="mb-3">
                <label class="form-label text-muted"><i
                        class="fas fa-envelope me-1"></i>Email</label>
                <p class="form-control-static" th:text="${jobSeeker.email}">john@example.com</p>
              </div>
              <div class="mb-3">
                <label class="form-label text-muted"><i class="fas fa-phone me-1"></i>Contact
                  Number</label>
                <p class="form-control-static"
                   th:if="${jobSeeker.contact != null && !jobSeeker.contact.isEmpty()}"
                   th:text="${jobSeeker.contact}">+1234567890</p>
                <p class="form-control-static text-muted"
                   th:unless="${jobSeeker.contact != null && !jobSeeker.contact.isEmpty()}">Not
                  provided</p>
              </div>
            </div>
            <div class="col-md-6">
              <div class="mb-3">
                <label class="form-label text-muted"><i
                        class="fas fa-map-marker-alt me-1"></i>Address</label>
                <p class="form-control-static"
                   th:if="${jobSeeker.address != null && !jobSeeker.address.isEmpty()}"
                   th:text="${jobSeeker.address}">123 Main St, City</p>
                <p class="form-control-static text-muted"
                   th:unless="${jobSeeker.address != null && !jobSeeker.address.isEmpty()}">Not
                  provided</p>
              </div>
              <div class="mb-3">
                <label class="form-label text-muted"><i
                        class="fas fa-file-pdf me-1"></i>Resume</label>
                <p class="form-control-static" th:if="${jobSeeker.resume != null}">
                  <a th:href="@{/jobseeker/resume}" class="btn btn-sm btn-outline-primary">
                    <i class="fas fa-file-pdf me-1"></i>View Resume
                  </a>
                </p>
                <p class="form-control-static text-muted" th:unless="${jobSeeker.resume != null}">
                  Not uploaded</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="skills">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="fas fa-code me-2"></i>Skills</h5>
          <a th:href="@{/jobseeker/skills}" class="btn btn-sm btn-outline-primary">
            <i class="fas fa-edit me-1"></i>Manage
          </a>
        </div>
        <div class="card-body">
          <div th:if="${jobSeekerSkills == null || jobSeekerSkills.empty}" class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>You haven't added any skills yet.
            <a th:href="@{/jobseeker/skills}" class="alert-link">Add your skills</a>
          </div>

          <div th:unless="${jobSeekerSkills == null || jobSeekerSkills.empty}" class="row timeline">
            <div th:each="jsSkill : ${jobSeekerSkills}" class="col-md-4 mb-3">
              <div class="card h-100">
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-start">
                    <div>
                      <h5 class="card-title" th:text="${jsSkill.skill.name}">Skill Name</h5>
                      <span class="badge bg-secondary"
                            th:text="${jsSkill.skill.category} ?: 'Uncategorized'">Category</span>
                    </div>
                    <form th:action="@{/jobseeker/skills/remove}" method="post">
                      <input type="hidden" name="skillId" th:value="${jsSkill.skill.id}">
                      <button type="submit" class="btn btn-sm btn-outline-danger">
                        <i class="fas fa-trash"></i>
                      </button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="experience">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Work Experience</h5>
          <a href="/experience/add" class="btn btn-sm btn-outline-primary">
            <i class="fas fa-plus me-1"></i>Add
          </a>
        </div>
        <div class="card-body">
          <div th:if="${experiences == null || experiences.empty}" class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>You haven't added any work experience yet.
            <a href="/experience/add" class="alert-link">Add your first experience</a>
          </div>

          <div th:unless="${experiences == null || experiences.empty}" class="timeline">
            <div th:each="experience : ${experiences}" class="timeline-item">
              <div class="card" th:classappend="${experience.endDate == null} ? 'current-job' : ''">
                <div class="card-body">
                  <form th:action="@{/experience/delete/{id}(id=${experience.expId})}"
                        method="post" class="edit-btn">
                    <button type="submit" class="btn btn-sm btn-outline-danger">
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                  <h5 th:text="${experience.jobTitle}">Job Title</h5>
                  <p class="text-muted mb-2" th:text="${experience.companyName}">Company Name</p>
                  <p class="mb-3">
                                            <span
                                                    th:text="${#temporals.format(experience.startDate, 'MMM d, yyyy')}">Start
                                                Date</span>
                    <span th:if="${experience.endDate != null}"
                          th:text="${#temporals.format(experience.endDate, 'MMM d, yyyy')}">End
                                                Date</span>
                    <span th:if="${experience.endDate == null}"
                          class="text-primary">Present</span>
                  </p>
                  <p th:if="${experience.description != null && !experience.description.isEmpty()}"
                     th:text="${experience.description}" class="text-muted"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card" id="qualifications">
        <div class="card-header bg-white d-flex justify-content-between align-items-center">
          <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Education & Qualifications</h5>
          <a href="/jobseeker/add-qualification" class="btn btn-sm btn-outline-primary">
            <i class="fas fa-plus me-1"></i>Add
          </a>
        </div>
        <div class="card-body">
          <div th:if="${qualifications == null || qualifications.empty}" class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>You haven't added any qualifications yet.
            <a href="/jobseeker/add-qualification" class="alert-link">Add your first qualification</a>
          </div>

          <div th:unless="${qualifications == null || qualifications.empty}" class="timeline">
            <div th:each="qualification : ${qualifications}" class="timeline-item">
              <div class="card">
                <div class="card-body">
                  <form
                          th:action="@{/jobseeker/qualification/delete/{id}(id=${qualification.id})}"
                          method="post" class="edit-btn">
                    <input type="hidden" name="_method" value="delete">
                    <button type="submit" class="btn btn-sm btn-outline-danger"
                            onclick="return confirm('Are you sure you want to delete this qualification?');">
                      <i class="fas fa-trash"></i>
                    </button>
                  </form>
                  <h5 th:text="${qualification.degreeProgram}">Degree Program</h5>
                  <p class="text-muted mb-2" th:text="${qualification.institute.name}">Institution
                  </p>
                  <p class="mb-2">
                    <span class="badge bg-secondary" th:text="${qualification.type}">Type</span>
                  </p>
                  <p class="mb-3">
                                            <span
                                                    th:text="${#temporals.format(qualification.startDate, 'MMM yyyy')}">Start
                                                Date</span> -
                    <span th:if="${qualification.endDate != null}"
                          th:text="${#temporals.format(qualification.endDate, 'MMM yyyy')}">End
                                                Date</span>
                    <span th:unless="${qualification.endDate != null}"
                          class="text-primary">Present</span>
                  </p>
                  <p th:if="${qualification.majorSpecialization != null}" class="mb-2">
                    <strong>Major:</strong> <span
                          th:text="${qualification.majorSpecialization}"></span>
                  </p>
                  <p th:if="${qualification.gradeGPA != null}" class="mb-2">
                    <strong>Grade/GPA:</strong> <span
                          th:text="${qualification.gradeGPA}"></span>
                  </p>
                  <p th:if="${qualification.description != null && !qualification.description.isEmpty()}"
                     th:text="${qualification.description}" class="text-muted"></p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> <!-- Close col-lg-9 -->
  </div> <!-- Close row -->
</div> <!-- Close container -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>